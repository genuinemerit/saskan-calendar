#!/usr/bin/env bash
# poetry_activate
#
# Convenience script for activating the current Poetry-managed virtualenv.
# Instead of running the long command:
#   poetry env activate $(poetry env info --path)/bin/activate
# you can just run:
#   source tools/poetry_activate
#
# Notes:
# - Must be sourced, not executed, so it changes your current shell’s environment.
# - Equivalent to `poetry shell`, but uses Poetry’s official env activation path.

if ! command -v poetry >/dev/null 2>&1; then
  echo "Error: poetry not found in PATH" >&2
  return 1
fi

VENV_PATH="$(poetry env info --path 2>/dev/null)"
if [ -z "$VENV_PATH" ]; then
  echo "Error: no Poetry environment found. Run 'poetry install' first." >&2
  return 1
fi

# Activate the environment in the current shell
source "$VENV_PATH/bin/activate"
